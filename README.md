<h1 align="center">
  Проект по ВОТ - Апликация за следене на отпадане на WEB сайтове
</h1>

## Съдържание:
* [Описание](#opisanie)
* [Как се използва](#howToUseIt)
* [Използвани технологии](#techs)
* [Нашият екип](#team)

<a name="opisanie"/>

## Описание:
<p align="justify"> Проектът представлява апликация за следедне на отпадане на подадени WEB сайтове. Приложението изпраща съобщение в случай на отпадане и възстановяване и пази историята на отпаданията и времето, в което сайтът е бил недостъпен. Поддържа възможността за скалируемост и отговаря на изискванията за висока отказоустойчивост</p>

<a name="howToUseIt"/>

## Flask API
<p align="justify"> Flask приложението се използва за мониторинг на сайтове. Използва се библиотеката 'requests' за изпращане на HTTP заявки към уебсайтовете и проверява дали полученият отговор е валиден или не. В случай, че сайтът не отговаря, приложението изпраща съобщение до потребителя с информация за отпадането на сайта. </p>
<p align="justify"> Flask приложението има възможност за записване на историята на отпаданията и времето, в което сайтът е бил недостъпен. Историята се записва във файл, който се съхранява локално на сървъра, където се изпълнява приложението. </p>
<h3 align="justify">API ендпойнти</h3>
<h4 align="justify">`GET /`</h4>
<p align="justify"> Връща JSON отговор със съобщение за добре дошли в API-то. </p>
<h4 align="justify">`POST /websites`</h4>
<p align="justify"> Добавя нов уеб сайт за проверка. Задава се URL адресът на уеб сайта, интервалът на проверка (в секунди, по подразбиране 10) и HTTP статус кодът, който трябва да се върне, за да се смята, че сайтът е наличен (по подразбиране 200). Връща JSON отговор със съобщение за успешно добавяне на уеб сайта или грешка, ако уеб сайтът вече е добавен. </p>
<h4 align="justify">`DELETE /websites/<web_id>`</h4>
<p align="justify"> Премахва уеб сайт по зададено ID. Връща JSON отговор със съобщение за успешно премахване на уеб сайта или грешка, ако ID-то не съществува. </p>
<h4 align="justify">`GET /websites/<web_id>`</h4>
<p align="justify"> Получава състоянието на уеб сайт по зададено ID. Връща JSON отговор с URL адресът на уеб сайта и състоянието му (UP или DOWN) или грешка, ако ID-то не съществува. </p>
<h4 align="justify">`GET /websites`</h4>
<p align="justify"> Получава състоянието на всички добавени уеб сайтове. Връща JSON отговор с списък от уеб сайтове и техните състояния (UP или DOWN). </p>

## Kubernetes deployment
<p align="justify"> Kubernetes деплоймънтът на приложението се осъществява с помощта на YAML файл. Файлът задава шаблон за множество от контейнери, които да се изпълняват върху един или няколко подове в Kubernetes кластър. </p>
<p align="justify"> Деплоймънтът създава три реплики на контейнера с Flask приложението, като използва образ, който е създаден от Dockerfile-a на приложението. Деплоймънтът осигурява автоматично възстановяване на контейнерите в случай на отказ и позволява скейлиране на броя реплики, за да се постигне висока отказоустойчивост на приложението. </p>

## Инструкции за стартиране: 

<p align="justify"> За да стартирате приложението и Kubernetes деплоймънта на вашата машина, следвайте следните инструкции: </p>

- Docker
- Python

<p align="justify"> Проектът се използва по следния начин: </p>

- Изтеглете кода от GitHub репозиторито на проекта.

- Инсталирайте Docker и Kubernetes във вашата операционна система.

- Отворете терминал в папката на проекта и изпълнете следните команди, за да създадете Docker образ и да го качите в Docker Hub:

```
kubectl apply -f website-checker.yml
```
Това ще създаде Kubernetes деплоймънт и Service.

- За да използвате приложението, въведете IP адреса на LoadBalancer Service-а в уеб браузъра си. Можете да го намерите, като изпълните следната команда:

```
kubectl get services
```
Това ще изведе списък с всички Kubernetes Services, включително и website-checker-service. От тук можете да копирате IP адреса на LoadBalancer Service-а и да го посетите в уеб браузъра си.

- За да проверите статуса на приложението, въведете следната команда:

```
kubectl get pods
```
Това ще изведе списък с всички Kubernetes Pods в деплоймънта. Можете да видите дали всички са в статус Running и дали имат Ready състояние.

Сега вие сте готови да използвате приложението и да следите отпадането на WEB сайтове.

<a name="techs"/>

## Използвани технологии:
- Python
- Docker
- Flask
- Kubernetes


<a name="team"/>

## Нашият екип:
- Матей Захариев
- Мартин Божилов
- Крум Стефанов 
- Никола Керезов
